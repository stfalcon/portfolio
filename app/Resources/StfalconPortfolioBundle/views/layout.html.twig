{% extends '::layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}

    <script type="text/javascript" >
        $(document).ready(function() {
                {# @todo вынести в projectBundle #}
                $("#projects-sortable").sortable({
                        placeholder: "ui-state-highlight",
                        update: function(event, ui) {
                            var array = [];
                            $(this).find('li').each(function(index){
                                array.push({id: $(this).attr('data-id'), index: index});
                            });
                            $.post('{{ path('portfolioProjectsApplyOrder') }}', {projects: array}, function(response){});
                        }
                });
                $("#projects-sortable").disableSelection();
        });
    </script>
{% endblock %}